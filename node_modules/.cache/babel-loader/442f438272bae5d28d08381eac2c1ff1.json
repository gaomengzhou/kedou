{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = prompt;\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require('react-dom');\n\nvar ReactDOM = _interopRequireWildcard(_reactDom);\n\nvar _closest = require('../_util/closest');\n\nvar _closest2 = _interopRequireDefault(_closest);\n\nvar _Modal = require('./Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction prompt(title, message, callbackOrActions) {\n  var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'default';\n  var defaultValue = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n  var placeholders = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : ['', ''];\n  var platform = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'ios';\n  var closed = false;\n  defaultValue = typeof defaultValue === 'string' ? defaultValue : typeof defaultValue === 'number' ? '' + defaultValue : '';\n\n  if (!callbackOrActions) {\n    // console.log('Must specify callbackOrActions');\n    return {\n      close: function close() {}\n    };\n  }\n\n  var prefixCls = 'am-modal';\n  var data = {\n    text: defaultValue\n  };\n\n  function onChange(e) {\n    var target = e.target;\n    var inputType = target.getAttribute('type');\n\n    if (inputType !== null) {\n      data[inputType] = target.value;\n    }\n  } // hotfix issue: https://github.com/ant-design/ant-design-mobile/issues/2177\n\n\n  function onClick(e) {\n    var target = e.currentTarget || e.target;\n\n    if (target) {\n      target.focus();\n    }\n  }\n\n  function onBlurFixWechat() {\n    // https://github.com/ant-design/ant-design-mobile/issues/3137\n    if (/MicroMessenger/.test(navigator.userAgent)) {\n      document.body.scrollTop = document.body.scrollTop;\n    }\n  }\n\n  var inputDom = void 0;\n\n  var focusFn = function focusFn(input) {\n    setTimeout(function () {\n      if (input) {\n        input.focus();\n      }\n    }, 500);\n  };\n\n  switch (type) {\n    case 'login-password':\n      inputDom = React.createElement('div', {\n        className: prefixCls + '-input-container'\n      }, React.createElement('div', {\n        className: prefixCls + '-input'\n      }, React.createElement('label', null, React.createElement('input', {\n        type: 'text',\n        defaultValue: data.text,\n        ref: function ref(input) {\n          return focusFn(input);\n        },\n        onClick: onClick,\n        onChange: onChange,\n        placeholder: placeholders[0],\n        onBlur: onBlurFixWechat\n      }))), React.createElement('div', {\n        className: prefixCls + '-input'\n      }, React.createElement('label', null, React.createElement('input', {\n        type: 'password',\n        defaultValue: data.password,\n        onClick: onClick,\n        onChange: onChange,\n        placeholder: placeholders[1],\n        onBlur: onBlurFixWechat\n      }))));\n      break;\n\n    case 'secure-text':\n      inputDom = React.createElement('div', {\n        className: prefixCls + '-input-container'\n      }, React.createElement('div', {\n        className: prefixCls + '-input'\n      }, React.createElement('label', null, React.createElement('input', {\n        type: 'password',\n        defaultValue: data.password,\n        ref: function ref(input) {\n          return focusFn(input);\n        },\n        onClick: onClick,\n        onChange: onChange,\n        placeholder: placeholders[0],\n        onBlur: onBlurFixWechat\n      }))));\n      break;\n\n    case 'default':\n    default:\n      inputDom = React.createElement('div', {\n        className: prefixCls + '-input-container'\n      }, React.createElement('div', {\n        className: prefixCls + '-input'\n      }, React.createElement('label', null, React.createElement('input', {\n        type: 'text',\n        defaultValue: data.text,\n        ref: function ref(input) {\n          return focusFn(input);\n        },\n        onClick: onClick,\n        onChange: onChange,\n        placeholder: placeholders[0],\n        onBlur: onBlurFixWechat\n      }))));\n  }\n\n  var content = React.createElement('div', null, message, inputDom);\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n\n  function close() {\n    ReactDOM.unmountComponentAtNode(div);\n\n    if (div && div.parentNode) {\n      div.parentNode.removeChild(div);\n    }\n  }\n\n  function handleConfirm(callback) {\n    if (typeof callback !== 'function') {\n      return;\n    }\n\n    var _data$text = data.text,\n        text = _data$text === undefined ? '' : _data$text,\n        _data$password = data.password,\n        password = _data$password === undefined ? '' : _data$password;\n    var callbackArgs = type === 'login-password' ? [text, password] : type === 'secure-text' ? [password] : [text];\n    return callback.apply(undefined, callbackArgs);\n  }\n\n  var actions = void 0;\n\n  if (typeof callbackOrActions === 'function') {\n    actions = [{\n      text: '取消',\n      onPress: function onPress() {}\n    }, {\n      text: '确定',\n      onPress: function onPress() {\n        handleConfirm(callbackOrActions);\n      }\n    }];\n  } else {\n    actions = callbackOrActions.map(function (item) {\n      return {\n        text: item.text,\n        onPress: function onPress() {\n          return handleConfirm(item.onPress);\n        }\n      };\n    });\n  }\n\n  var footer = actions.map(function (button) {\n    // tslint:disable-next-line:only-arrow-functions\n    var orginPress = button.onPress || function () {};\n\n    button.onPress = function () {\n      if (closed) {\n        return;\n      }\n\n      var res = orginPress();\n\n      if (res && res.then) {\n        res.then(function () {\n          closed = true;\n          close();\n        })['catch'](function () {});\n      } else {\n        closed = true;\n        close();\n      }\n    };\n\n    return button;\n  });\n\n  function onWrapTouchStart(e) {\n    // exclude input element for focus\n    if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n      return;\n    }\n\n    var pNode = (0, _closest2['default'])(e.target, '.' + prefixCls + '-content');\n\n    if (!pNode) {\n      e.preventDefault();\n    }\n  }\n\n  ReactDOM.render(React.createElement(_Modal2['default'], {\n    visible: true,\n    transparent: true,\n    prefixCls: prefixCls,\n    title: title,\n    closable: false,\n    maskClosable: false,\n    transitionName: 'am-zoom',\n    footer: footer,\n    maskTransitionName: 'am-fade',\n    platform: platform,\n    wrapProps: {\n      onTouchStart: onWrapTouchStart\n    }\n  }, React.createElement('div', {\n    className: prefixCls + '-propmt-content'\n  }, content)), div);\n  return {\n    close: close\n  };\n}\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/gaomengzhou/Projects/kedou/node_modules/antd-mobile/lib/modal/prompt.js"],"names":["Object","defineProperty","exports","value","prompt","_react","require","React","_interopRequireWildcard","_reactDom","ReactDOM","_closest","_closest2","_interopRequireDefault","_Modal","_Modal2","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","title","message","callbackOrActions","type","arguments","length","undefined","defaultValue","placeholders","platform","closed","close","prefixCls","data","text","onChange","e","target","inputType","getAttribute","onClick","currentTarget","focus","onBlurFixWechat","test","navigator","userAgent","document","body","scrollTop","inputDom","focusFn","input","setTimeout","createElement","className","ref","placeholder","onBlur","password","content","div","appendChild","unmountComponentAtNode","parentNode","removeChild","handleConfirm","callback","_data$text","_data$password","callbackArgs","apply","actions","onPress","map","item","footer","button","orginPress","res","then","onWrapTouchStart","pNode","preventDefault","render","visible","transparent","closable","maskClosable","transitionName","maskTransitionName","wrapProps","onTouchStart","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports['default'] = prompt;\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require('react-dom');\n\nvar ReactDOM = _interopRequireWildcard(_reactDom);\n\nvar _closest = require('../_util/closest');\n\nvar _closest2 = _interopRequireDefault(_closest);\n\nvar _Modal = require('./Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction prompt(title, message, callbackOrActions) {\n    var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'default';\n    var defaultValue = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n    var placeholders = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : ['', ''];\n    var platform = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'ios';\n\n    var closed = false;\n    defaultValue = typeof defaultValue === 'string' ? defaultValue : typeof defaultValue === 'number' ? '' + defaultValue : '';\n    if (!callbackOrActions) {\n        // console.log('Must specify callbackOrActions');\n        return {\n            close: function close() {}\n        };\n    }\n    var prefixCls = 'am-modal';\n    var data = {\n        text: defaultValue\n    };\n    function onChange(e) {\n        var target = e.target;\n        var inputType = target.getAttribute('type');\n        if (inputType !== null) {\n            data[inputType] = target.value;\n        }\n    }\n    // hotfix issue: https://github.com/ant-design/ant-design-mobile/issues/2177\n    function onClick(e) {\n        var target = e.currentTarget || e.target;\n        if (target) {\n            target.focus();\n        }\n    }\n    function onBlurFixWechat() {\n        // https://github.com/ant-design/ant-design-mobile/issues/3137\n        if (/MicroMessenger/.test(navigator.userAgent)) {\n            document.body.scrollTop = document.body.scrollTop;\n        }\n    }\n    var inputDom = void 0;\n    var focusFn = function focusFn(input) {\n        setTimeout(function () {\n            if (input) {\n                input.focus();\n            }\n        }, 500);\n    };\n    switch (type) {\n        case 'login-password':\n            inputDom = React.createElement(\n                'div',\n                { className: prefixCls + '-input-container' },\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-input' },\n                    React.createElement(\n                        'label',\n                        null,\n                        React.createElement('input', { type: 'text', defaultValue: data.text, ref: function ref(input) {\n                                return focusFn(input);\n                            }, onClick: onClick, onChange: onChange, placeholder: placeholders[0], onBlur: onBlurFixWechat })\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-input' },\n                    React.createElement(\n                        'label',\n                        null,\n                        React.createElement('input', { type: 'password', defaultValue: data.password, onClick: onClick, onChange: onChange, placeholder: placeholders[1], onBlur: onBlurFixWechat })\n                    )\n                )\n            );\n            break;\n        case 'secure-text':\n            inputDom = React.createElement(\n                'div',\n                { className: prefixCls + '-input-container' },\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-input' },\n                    React.createElement(\n                        'label',\n                        null,\n                        React.createElement('input', { type: 'password', defaultValue: data.password, ref: function ref(input) {\n                                return focusFn(input);\n                            }, onClick: onClick, onChange: onChange, placeholder: placeholders[0], onBlur: onBlurFixWechat })\n                    )\n                )\n            );\n            break;\n        case 'default':\n        default:\n            inputDom = React.createElement(\n                'div',\n                { className: prefixCls + '-input-container' },\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-input' },\n                    React.createElement(\n                        'label',\n                        null,\n                        React.createElement('input', { type: 'text', defaultValue: data.text, ref: function ref(input) {\n                                return focusFn(input);\n                            }, onClick: onClick, onChange: onChange, placeholder: placeholders[0], onBlur: onBlurFixWechat })\n                    )\n                )\n            );\n    }\n    var content = React.createElement(\n        'div',\n        null,\n        message,\n        inputDom\n    );\n    var div = document.createElement('div');\n    document.body.appendChild(div);\n    function close() {\n        ReactDOM.unmountComponentAtNode(div);\n        if (div && div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n    }\n    function handleConfirm(callback) {\n        if (typeof callback !== 'function') {\n            return;\n        }\n        var _data$text = data.text,\n            text = _data$text === undefined ? '' : _data$text,\n            _data$password = data.password,\n            password = _data$password === undefined ? '' : _data$password;\n\n        var callbackArgs = type === 'login-password' ? [text, password] : type === 'secure-text' ? [password] : [text];\n        return callback.apply(undefined, callbackArgs);\n    }\n    var actions = void 0;\n    if (typeof callbackOrActions === 'function') {\n        actions = [{\n            text: '取消',\n            onPress: function onPress() {}\n        }, {\n            text: '确定',\n            onPress: function onPress() {\n                handleConfirm(callbackOrActions);\n            }\n        }];\n    } else {\n        actions = callbackOrActions.map(function (item) {\n            return {\n                text: item.text,\n                onPress: function onPress() {\n                    return handleConfirm(item.onPress);\n                }\n            };\n        });\n    }\n    var footer = actions.map(function (button) {\n        // tslint:disable-next-line:only-arrow-functions\n        var orginPress = button.onPress || function () {};\n        button.onPress = function () {\n            if (closed) {\n                return;\n            }\n            var res = orginPress();\n            if (res && res.then) {\n                res.then(function () {\n                    closed = true;\n                    close();\n                })['catch'](function () {});\n            } else {\n                closed = true;\n                close();\n            }\n        };\n        return button;\n    });\n    function onWrapTouchStart(e) {\n        // exclude input element for focus\n        if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\n            return;\n        }\n        var pNode = (0, _closest2['default'])(e.target, '.' + prefixCls + '-content');\n        if (!pNode) {\n            e.preventDefault();\n        }\n    }\n    ReactDOM.render(React.createElement(\n        _Modal2['default'],\n        { visible: true, transparent: true, prefixCls: prefixCls, title: title, closable: false, maskClosable: false, transitionName: 'am-zoom', footer: footer, maskTransitionName: 'am-fade', platform: platform, wrapProps: { onTouchStart: onWrapTouchStart } },\n        React.createElement(\n            'div',\n            { className: prefixCls + '-propmt-content' },\n            content\n        )\n    ), div);\n    return {\n        close: close\n    };\n}\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}