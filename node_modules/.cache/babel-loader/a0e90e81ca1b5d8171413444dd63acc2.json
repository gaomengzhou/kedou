{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dialog from './Dialog';\n\nfunction noop() {}\n\nvar IS_REACT_16 = !!ReactDOM.createPortal;\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar DialogWrap = function (_React$Component) {\n  _inherits(DialogWrap, _React$Component);\n\n  function DialogWrap() {\n    _classCallCheck(this, DialogWrap);\n\n    var _this = _possibleConstructorReturn(this, (DialogWrap.__proto__ || Object.getPrototypeOf(DialogWrap)).apply(this, arguments));\n\n    _this.saveRef = function (node) {\n      if (IS_REACT_16) {\n        _this._component = node;\n      }\n    };\n\n    _this.getComponent = function (visible) {\n      var props = _extends({}, _this.props);\n\n      ['visible', 'onAnimateLeave'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n          delete props[key];\n        }\n      });\n      return React.createElement(Dialog, _extends({}, props, {\n        visible: visible,\n        onAnimateLeave: _this.removeContainer,\n        ref: _this.saveRef\n      }));\n    };\n\n    _this.removeContainer = function () {\n      if (_this.container) {\n        if (!IS_REACT_16) {\n          ReactDOM.unmountComponentAtNode(_this.container);\n        }\n\n        _this.container.parentNode.removeChild(_this.container);\n\n        _this.container = null;\n      }\n    };\n\n    _this.getContainer = function () {\n      if (!_this.container) {\n        var container = document.createElement('div');\n        var containerId = _this.props.prefixCls + '-container-' + new Date().getTime();\n        container.setAttribute('id', containerId);\n        document.body.appendChild(container);\n        _this.container = container;\n      }\n\n      return _this.container;\n    };\n\n    return _this;\n  }\n\n  _createClass(DialogWrap, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.visible) {\n        this.componentDidUpdate();\n      }\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(_ref) {\n      var visible = _ref.visible;\n      return !!(this.props.visible || visible);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.visible) {\n        if (!IS_REACT_16) {\n          this.renderDialog(false);\n        } else {\n          // TODO for react@16 createPortal animation\n          this.removeContainer();\n        }\n      } else {\n        this.removeContainer();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (!IS_REACT_16) {\n        this.renderDialog(this.props.visible);\n      }\n    }\n  }, {\n    key: 'renderDialog',\n    value: function renderDialog(visible) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!CAN_USE_DOM) {\n        return null;\n      }\n\n      var visible = this.props.visible;\n\n      if (IS_REACT_16 && (visible || this._component)) {\n        return ReactDOM.createPortal(this.getComponent(visible), this.getContainer());\n      }\n\n      return null;\n    }\n  }]);\n\n  return DialogWrap;\n}(React.Component);\n\nexport default DialogWrap;\nDialogWrap.defaultProps = {\n  visible: false,\n  prefixCls: 'rmc-dialog',\n  onClose: noop\n};","map":{"version":3,"sources":["/Users/Ryan/Projects/kedou/node_modules/rmc-dialog/es/DialogWrap.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","Dialog","noop","IS_REACT_16","createPortal","CAN_USE_DOM","window","document","createElement","DialogWrap","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","saveRef","node","_component","getComponent","visible","props","forEach","key","hasOwnProperty","onAnimateLeave","removeContainer","ref","container","unmountComponentAtNode","parentNode","removeChild","getContainer","containerId","prefixCls","Date","getTime","setAttribute","body","appendChild","value","componentDidMount","componentDidUpdate","shouldComponentUpdate","_ref","componentWillUnmount","renderDialog","unstable_renderSubtreeIntoContainer","render","Component","defaultProps","onClose"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dialog from './Dialog';\nfunction noop() {}\nvar IS_REACT_16 = !!ReactDOM.createPortal;\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar DialogWrap = function (_React$Component) {\n    _inherits(DialogWrap, _React$Component);\n\n    function DialogWrap() {\n        _classCallCheck(this, DialogWrap);\n\n        var _this = _possibleConstructorReturn(this, (DialogWrap.__proto__ || Object.getPrototypeOf(DialogWrap)).apply(this, arguments));\n\n        _this.saveRef = function (node) {\n            if (IS_REACT_16) {\n                _this._component = node;\n            }\n        };\n        _this.getComponent = function (visible) {\n            var props = _extends({}, _this.props);\n            ['visible', 'onAnimateLeave'].forEach(function (key) {\n                if (props.hasOwnProperty(key)) {\n                    delete props[key];\n                }\n            });\n            return React.createElement(Dialog, _extends({}, props, { visible: visible, onAnimateLeave: _this.removeContainer, ref: _this.saveRef }));\n        };\n        _this.removeContainer = function () {\n            if (_this.container) {\n                if (!IS_REACT_16) {\n                    ReactDOM.unmountComponentAtNode(_this.container);\n                }\n                _this.container.parentNode.removeChild(_this.container);\n                _this.container = null;\n            }\n        };\n        _this.getContainer = function () {\n            if (!_this.container) {\n                var container = document.createElement('div');\n                var containerId = _this.props.prefixCls + '-container-' + new Date().getTime();\n                container.setAttribute('id', containerId);\n                document.body.appendChild(container);\n                _this.container = container;\n            }\n            return _this.container;\n        };\n        return _this;\n    }\n\n    _createClass(DialogWrap, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.visible) {\n                this.componentDidUpdate();\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var visible = _ref.visible;\n\n            return !!(this.props.visible || visible);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.props.visible) {\n                if (!IS_REACT_16) {\n                    this.renderDialog(false);\n                } else {\n                    // TODO for react@16 createPortal animation\n                    this.removeContainer();\n                }\n            } else {\n                this.removeContainer();\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (!IS_REACT_16) {\n                this.renderDialog(this.props.visible);\n            }\n        }\n    }, {\n        key: 'renderDialog',\n        value: function renderDialog(visible) {\n            ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!CAN_USE_DOM) {\n                return null;\n            }\n            var visible = this.props.visible;\n\n            if (IS_REACT_16 && (visible || this._component)) {\n                return ReactDOM.createPortal(this.getComponent(visible), this.getContainer());\n            }\n            return null;\n        }\n    }]);\n\n    return DialogWrap;\n}(React.Component);\n\nexport default DialogWrap;\n\nDialogWrap.defaultProps = {\n    visible: false,\n    prefixCls: 'rmc-dialog',\n    onClose: noop\n};"]},"metadata":{},"sourceType":"module"}