{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport classNames from 'classnames';\n\nvar StaticRenderer = function (_React$Component) {\n  _inherits(StaticRenderer, _React$Component);\n\n  function StaticRenderer() {\n    _classCallCheck(this, StaticRenderer);\n\n    return _possibleConstructorReturn(this, (StaticRenderer.__proto__ || Object.getPrototypeOf(StaticRenderer)).apply(this, arguments));\n  }\n\n  _createClass(StaticRenderer, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      return nextProps.shouldUpdate;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement('div', null, this.props.render());\n    }\n  }]);\n\n  return StaticRenderer;\n}(React.Component);\n\nfunction setTransform(nodeStyle, value) {\n  nodeStyle.transform = value;\n  nodeStyle.webkitTransform = value;\n  nodeStyle.MozTransform = value;\n}\n\nvar isWebView = typeof navigator !== 'undefined' && /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);\nvar DOWN = 'down';\nvar UP = 'up';\nvar INDICATOR = {\n  activate: 'release',\n  deactivate: 'pull',\n  release: 'loading',\n  finish: 'finish'\n};\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener('test', null, opts);\n} catch (e) {// empty\n}\n\nvar willPreventDefault = supportsPassive ? {\n  passive: false\n} : false; // const willNotPreventDefault = supportsPassive ? { passive: true } : false;\n\nvar PullToRefresh = function (_React$Component2) {\n  _inherits(PullToRefresh, _React$Component2);\n\n  function PullToRefresh() {\n    _classCallCheck(this, PullToRefresh); // https://github.com/yiminghe/zscroller/blob/2d97973287135745818a0537712235a39a6a62a1/src/Scroller.js#L355\n    // currSt: `activate` / `deactivate` / `release` / `finish`\n\n\n    var _this2 = _possibleConstructorReturn(this, (PullToRefresh.__proto__ || Object.getPrototypeOf(PullToRefresh)).apply(this, arguments));\n\n    _this2.state = {\n      currSt: 'deactivate',\n      dragOnEdge: false\n    };\n    _this2._isMounted = false;\n    _this2.shouldUpdateChildren = false;\n\n    _this2.triggerPullToRefresh = function () {\n      // 在初始化时、用代码 自动 触发 pullToRefresh\n      // 注意：当 direction 为 up 时，当 visible length < content length 时、则看不到效果\n      // 添加this._isMounted的判断，否则组建一实例化，currSt就会是finish\n      if (!_this2.state.dragOnEdge && _this2._isMounted) {\n        if (_this2.props.refreshing) {\n          if (_this2.props.direction === UP) {\n            _this2._lastScreenY = -_this2.props.distanceToRefresh - 1;\n          }\n\n          if (_this2.props.direction === DOWN) {\n            _this2._lastScreenY = _this2.props.distanceToRefresh + 1;\n          } // change dom need after setState\n\n\n          _this2.setState({\n            currSt: 'release'\n          }, function () {\n            return _this2.setContentStyle(_this2._lastScreenY);\n          });\n        } else {\n          _this2.setState({\n            currSt: 'finish'\n          }, function () {\n            return _this2.reset();\n          });\n        }\n      }\n    };\n\n    _this2.init = function (ele) {\n      if (!ele) {\n        // like return in destroy fn ???!!\n        return;\n      }\n\n      _this2._to = {\n        touchstart: _this2.onTouchStart.bind(_this2, ele),\n        touchmove: _this2.onTouchMove.bind(_this2, ele),\n        touchend: _this2.onTouchEnd.bind(_this2, ele),\n        touchcancel: _this2.onTouchEnd.bind(_this2, ele)\n      };\n      Object.keys(_this2._to).forEach(function (key) {\n        ele.addEventListener(key, _this2._to[key], willPreventDefault);\n      });\n    };\n\n    _this2.destroy = function (ele) {\n      if (!_this2._to || !ele) {\n        // componentWillUnmount fire before componentDidMount, like forceUpdate ???!!\n        return;\n      }\n\n      Object.keys(_this2._to).forEach(function (key) {\n        ele.removeEventListener(key, _this2._to[key]);\n      });\n    };\n\n    _this2.onTouchStart = function (_ele, e) {\n      _this2._ScreenY = _this2._startScreenY = e.touches[0].screenY; // 一开始 refreshing 为 true 时 this._lastScreenY 有值\n\n      _this2._lastScreenY = _this2._lastScreenY || 0;\n    };\n\n    _this2.isEdge = function (ele, direction) {\n      var container = _this2.props.getScrollContainer();\n\n      if (container && container === document.body) {\n        // In chrome61 `document.body.scrollTop` is invalid\n        var scrollNode = document.scrollingElement ? document.scrollingElement : document.body;\n\n        if (direction === UP) {\n          return scrollNode.scrollHeight - scrollNode.scrollTop <= window.innerHeight;\n        }\n\n        if (direction === DOWN) {\n          return scrollNode.scrollTop <= 0;\n        }\n      }\n\n      if (direction === UP) {\n        return ele.scrollHeight - ele.scrollTop === ele.clientHeight;\n      }\n\n      if (direction === DOWN) {\n        return ele.scrollTop <= 0;\n      }\n    };\n\n    _this2.damping = function (dy) {\n      if (Math.abs(_this2._lastScreenY) > _this2.props.damping) {\n        return 0;\n      }\n\n      var ratio = Math.abs(_this2._ScreenY - _this2._startScreenY) / window.screen.height;\n      dy *= (1 - ratio) * 0.6;\n      return dy;\n    };\n\n    _this2.onTouchMove = function (ele, e) {\n      // 使用 pageY 对比有问题\n      var _screenY = e.touches[0].screenY;\n      var direction = _this2.props.direction; // 拖动方向不符合的不处理\n\n      if (direction === UP && _this2._startScreenY < _screenY || direction === DOWN && _this2._startScreenY > _screenY) {\n        return;\n      }\n\n      if (_this2.isEdge(ele, direction)) {\n        if (!_this2.state.dragOnEdge) {\n          // 当用户开始往上滑的时候isEdge还是false的话，会导致this._ScreenY不是想要的，只有当isEdge为true时，再上滑，才有意义\n          // 下面这行代码解决了上面这个问题\n          _this2._ScreenY = _this2._startScreenY = e.touches[0].screenY;\n\n          _this2.setState({\n            dragOnEdge: true\n          });\n        }\n\n        e.preventDefault(); // add stopPropagation with fastclick will trigger content onClick event. why?\n        // ref https://github.com/ant-design/ant-design-mobile/issues/2141\n        // e.stopPropagation();\n\n        var _diff = Math.round(_screenY - _this2._ScreenY);\n\n        _this2._ScreenY = _screenY;\n        _this2._lastScreenY += _this2.damping(_diff);\n\n        _this2.setContentStyle(_this2._lastScreenY);\n\n        if (Math.abs(_this2._lastScreenY) < _this2.props.distanceToRefresh) {\n          if (_this2.state.currSt !== 'deactivate') {\n            // console.log('back to the distance');\n            _this2.setState({\n              currSt: 'deactivate'\n            });\n          }\n        } else {\n          if (_this2.state.currSt === 'deactivate') {\n            // console.log('reach to the distance');\n            _this2.setState({\n              currSt: 'activate'\n            });\n          }\n        } // https://github.com/ant-design/ant-design-mobile/issues/573#issuecomment-339560829\n        // iOS UIWebView issue, It seems no problem in WKWebView\n\n\n        if (isWebView && e.changedTouches[0].clientY < 0) {\n          _this2.onTouchEnd();\n        }\n      }\n    };\n\n    _this2.onTouchEnd = function () {\n      if (_this2.state.dragOnEdge) {\n        _this2.setState({\n          dragOnEdge: false\n        });\n      }\n\n      if (_this2.state.currSt === 'activate') {\n        _this2.setState({\n          currSt: 'release'\n        });\n\n        _this2._timer = setTimeout(function () {\n          if (!_this2.props.refreshing) {\n            _this2.setState({\n              currSt: 'finish'\n            }, function () {\n              return _this2.reset();\n            });\n          }\n\n          _this2._timer = undefined;\n        }, 1000);\n\n        _this2.props.onRefresh();\n      } else {\n        _this2.reset();\n      }\n    };\n\n    _this2.reset = function () {\n      _this2._lastScreenY = 0;\n\n      _this2.setContentStyle(0);\n    };\n\n    _this2.setContentStyle = function (ty) {\n      // todos: Why sometimes do not have `this.contentRef` ?\n      if (_this2.contentRef) {\n        setTransform(_this2.contentRef.style, 'translate3d(0px,' + ty + 'px,0)');\n      }\n    };\n\n    return _this2;\n  }\n\n  _createClass(PullToRefresh, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      this.shouldUpdateChildren = this.props.children !== nextProps.children;\n      return true;\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps === this.props || prevProps.refreshing === this.props.refreshing) {\n        return;\n      } // triggerPullToRefresh 需要尽可能减少 setState 次数\n\n\n      this.triggerPullToRefresh();\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this3 = this; // `getScrollContainer` most likely return React.Node at the next tick. Need setTimeout\n\n\n      setTimeout(function () {\n        _this3.init(_this3.props.getScrollContainer() || _this3.containerRef);\n\n        _this3.triggerPullToRefresh();\n\n        _this3._isMounted = true;\n      });\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // Should have no setTimeout here!\n      this.destroy(this.props.getScrollContainer() || this.containerRef);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var props = _extends({}, this.props);\n\n      delete props.damping;\n\n      var className = props.className,\n          prefixCls = props.prefixCls,\n          children = props.children,\n          getScrollContainer = props.getScrollContainer,\n          direction = props.direction,\n          onRefresh = props.onRefresh,\n          refreshing = props.refreshing,\n          indicator = props.indicator,\n          distanceToRefresh = props.distanceToRefresh,\n          restProps = __rest(props, [\"className\", \"prefixCls\", \"children\", \"getScrollContainer\", \"direction\", \"onRefresh\", \"refreshing\", \"indicator\", \"distanceToRefresh\"]);\n\n      var renderChildren = React.createElement(StaticRenderer, {\n        shouldUpdate: this.shouldUpdateChildren,\n        render: function render() {\n          return children;\n        }\n      });\n\n      var renderRefresh = function renderRefresh(cls) {\n        var cla = classNames(cls, !_this4.state.dragOnEdge && prefixCls + '-transition');\n        return React.createElement('div', {\n          className: prefixCls + '-content-wrapper'\n        }, React.createElement('div', {\n          className: cla,\n          ref: function ref(el) {\n            return _this4.contentRef = el;\n          }\n        }, direction === UP ? renderChildren : null, React.createElement('div', {\n          className: prefixCls + '-indicator'\n        }, indicator[_this4.state.currSt] || INDICATOR[_this4.state.currSt]), direction === DOWN ? renderChildren : null));\n      };\n\n      if (getScrollContainer()) {\n        return renderRefresh(prefixCls + '-content ' + prefixCls + '-' + direction);\n      }\n\n      return React.createElement('div', _extends({\n        ref: function ref(el) {\n          return _this4.containerRef = el;\n        },\n        className: classNames(className, prefixCls, prefixCls + '-' + direction)\n      }, restProps), renderRefresh(prefixCls + '-content'));\n    }\n  }]);\n\n  return PullToRefresh;\n}(React.Component);\n\nexport default PullToRefresh;\nPullToRefresh.defaultProps = {\n  prefixCls: 'rmc-pull-to-refresh',\n  getScrollContainer: function getScrollContainer() {\n    return undefined;\n  },\n  direction: DOWN,\n  distanceToRefresh: 25,\n  damping: 100,\n  indicator: INDICATOR\n};","map":{"version":3,"sources":["/Users/Ryan/Projects/kedou/node_modules/rmc-pull-to-refresh/es/PullToRefresh.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","React","classNames","StaticRenderer","_React$Component","__proto__","getPrototypeOf","apply","arguments","key","value","shouldComponentUpdate","nextProps","shouldUpdate","render","createElement","props","Component","setTransform","nodeStyle","transform","webkitTransform","MozTransform","isWebView","navigator","test","userAgent","DOWN","UP","INDICATOR","activate","deactivate","release","finish","supportsPassive","opts","defineProperty","get","window","addEventListener","willPreventDefault","passive","PullToRefresh","_React$Component2","_this2","state","currSt","dragOnEdge","_isMounted","shouldUpdateChildren","triggerPullToRefresh","refreshing","direction","_lastScreenY","distanceToRefresh","setState","setContentStyle","reset","init","ele","_to","touchstart","onTouchStart","bind","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","keys","forEach","destroy","removeEventListener","_ele","_ScreenY","_startScreenY","touches","screenY","isEdge","container","getScrollContainer","document","body","scrollNode","scrollingElement","scrollHeight","scrollTop","innerHeight","clientHeight","damping","dy","Math","abs","ratio","screen","height","_screenY","preventDefault","_diff","round","changedTouches","clientY","_timer","setTimeout","undefined","onRefresh","ty","contentRef","style","children","componentDidUpdate","prevProps","componentDidMount","_this3","containerRef","componentWillUnmount","_this4","className","prefixCls","indicator","restProps","renderChildren","renderRefresh","cls","cla","ref","el","defaultProps"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,+BAArB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,YAAP,MAAyB,mCAAzB;AACA,OAAOC,0BAAP,MAAuC,iDAAvC;AACA,OAAOC,SAAP,MAAsB,gCAAtB;;AACA,IAAIC,MAAM,GAAG,QAAQ,KAAKA,MAAb,IAAuB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd,EAAiB;AACb,QAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EAAoED,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;AACvE;;AAAA,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EAAqE,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AAC1I,QAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAtB,EAAyBR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AAC5B;AAAA,SAAOR,CAAP;AACJ,CAPD;;AAQA,OAAOU,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAEA,IAAIC,cAAc,GAAG,UAAUC,gBAAV,EAA4B;AAC7CjB,EAAAA,SAAS,CAACgB,cAAD,EAAiBC,gBAAjB,CAAT;;AAEA,WAASD,cAAT,GAA0B;AACtBnB,IAAAA,eAAe,CAAC,IAAD,EAAOmB,cAAP,CAAf;;AAEA,WAAOjB,0BAA0B,CAAC,IAAD,EAAO,CAACiB,cAAc,CAACE,SAAf,IAA4BZ,MAAM,CAACa,cAAP,CAAsBH,cAAtB,CAA7B,EAAoEI,KAApE,CAA0E,IAA1E,EAAgFC,SAAhF,CAAP,CAAjC;AACH;;AAEDvB,EAAAA,YAAY,CAACkB,cAAD,EAAiB,CAAC;AAC1BM,IAAAA,GAAG,EAAE,uBADqB;AAE1BC,IAAAA,KAAK,EAAE,SAASC,qBAAT,CAA+BC,SAA/B,EAA0C;AAC7C,aAAOA,SAAS,CAACC,YAAjB;AACH;AAJyB,GAAD,EAK1B;AACCJ,IAAAA,GAAG,EAAE,QADN;AAECC,IAAAA,KAAK,EAAE,SAASI,MAAT,GAAkB;AACrB,aAAOb,KAAK,CAACc,aAAN,CACH,KADG,EAEH,IAFG,EAGH,KAAKC,KAAL,CAAWF,MAAX,EAHG,CAAP;AAKH;AARF,GAL0B,CAAjB,CAAZ;;AAgBA,SAAOX,cAAP;AACH,CA1BoB,CA0BnBF,KAAK,CAACgB,SA1Ba,CAArB;;AA4BA,SAASC,YAAT,CAAsBC,SAAtB,EAAiCT,KAAjC,EAAwC;AACpCS,EAAAA,SAAS,CAACC,SAAV,GAAsBV,KAAtB;AACAS,EAAAA,SAAS,CAACE,eAAV,GAA4BX,KAA5B;AACAS,EAAAA,SAAS,CAACG,YAAV,GAAyBZ,KAAzB;AACH;;AACD,IAAIa,SAAS,GAAG,OAAOC,SAAP,KAAqB,WAArB,IAAoC,+CAA+CC,IAA/C,CAAoDD,SAAS,CAACE,SAA9D,CAApD;AACA,IAAIC,IAAI,GAAG,MAAX;AACA,IAAIC,EAAE,GAAG,IAAT;AACA,IAAIC,SAAS,GAAG;AAAEC,EAAAA,QAAQ,EAAE,SAAZ;AAAuBC,EAAAA,UAAU,EAAE,MAAnC;AAA2CC,EAAAA,OAAO,EAAE,SAApD;AAA+DC,EAAAA,MAAM,EAAE;AAAvE,CAAhB;AACA,IAAIC,eAAe,GAAG,KAAtB;;AACA,IAAI;AACA,MAAIC,IAAI,GAAG1C,MAAM,CAAC2C,cAAP,CAAsB,EAAtB,EAA0B,SAA1B,EAAqC;AAC5CC,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAChBH,MAAAA,eAAe,GAAG,IAAlB;AACH;AAH2C,GAArC,CAAX;AAKAI,EAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,IAAhC,EAAsCJ,IAAtC;AACH,CAPD,CAOE,OAAO7C,CAAP,EAAU,CACR;AACH;;AACD,IAAIkD,kBAAkB,GAAGN,eAAe,GAAG;AAAEO,EAAAA,OAAO,EAAE;AAAX,CAAH,GAAwB,KAAhE,C,CACA;;AAEA,IAAIC,aAAa,GAAG,UAAUC,iBAAV,EAA6B;AAC7CxD,EAAAA,SAAS,CAACuD,aAAD,EAAgBC,iBAAhB,CAAT;;AAEA,WAASD,aAAT,GAAyB;AACrB1D,IAAAA,eAAe,CAAC,IAAD,EAAO0D,aAAP,CAAf,CADqB,CAGrB;AACA;;;AACA,QAAIE,MAAM,GAAG1D,0BAA0B,CAAC,IAAD,EAAO,CAACwD,aAAa,CAACrC,SAAd,IAA2BZ,MAAM,CAACa,cAAP,CAAsBoC,aAAtB,CAA5B,EAAkEnC,KAAlE,CAAwE,IAAxE,EAA8EC,SAA9E,CAAP,CAAvC;;AAEAoC,IAAAA,MAAM,CAACC,KAAP,GAAe;AACXC,MAAAA,MAAM,EAAE,YADG;AAEXC,MAAAA,UAAU,EAAE;AAFD,KAAf;AAIAH,IAAAA,MAAM,CAACI,UAAP,GAAoB,KAApB;AACAJ,IAAAA,MAAM,CAACK,oBAAP,GAA8B,KAA9B;;AACAL,IAAAA,MAAM,CAACM,oBAAP,GAA8B,YAAY;AACtC;AACA;AACA;AACA,UAAI,CAACN,MAAM,CAACC,KAAP,CAAaE,UAAd,IAA4BH,MAAM,CAACI,UAAvC,EAAmD;AAC/C,YAAIJ,MAAM,CAAC5B,KAAP,CAAamC,UAAjB,EAA6B;AACzB,cAAIP,MAAM,CAAC5B,KAAP,CAAaoC,SAAb,KAA2BxB,EAA/B,EAAmC;AAC/BgB,YAAAA,MAAM,CAACS,YAAP,GAAsB,CAACT,MAAM,CAAC5B,KAAP,CAAasC,iBAAd,GAAkC,CAAxD;AACH;;AACD,cAAIV,MAAM,CAAC5B,KAAP,CAAaoC,SAAb,KAA2BzB,IAA/B,EAAqC;AACjCiB,YAAAA,MAAM,CAACS,YAAP,GAAsBT,MAAM,CAAC5B,KAAP,CAAasC,iBAAb,GAAiC,CAAvD;AACH,WANwB,CAOzB;;;AACAV,UAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,YAAAA,MAAM,EAAE;AAAV,WAAhB,EAAuC,YAAY;AAC/C,mBAAOF,MAAM,CAACY,eAAP,CAAuBZ,MAAM,CAACS,YAA9B,CAAP;AACH,WAFD;AAGH,SAXD,MAWO;AACHT,UAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,YAAAA,MAAM,EAAE;AAAV,WAAhB,EAAsC,YAAY;AAC9C,mBAAOF,MAAM,CAACa,KAAP,EAAP;AACH,WAFD;AAGH;AACJ;AACJ,KAtBD;;AAuBAb,IAAAA,MAAM,CAACc,IAAP,GAAc,UAAUC,GAAV,EAAe;AACzB,UAAI,CAACA,GAAL,EAAU;AACN;AACA;AACH;;AACDf,MAAAA,MAAM,CAACgB,GAAP,GAAa;AACTC,QAAAA,UAAU,EAAEjB,MAAM,CAACkB,YAAP,CAAoBC,IAApB,CAAyBnB,MAAzB,EAAiCe,GAAjC,CADH;AAETK,QAAAA,SAAS,EAAEpB,MAAM,CAACqB,WAAP,CAAmBF,IAAnB,CAAwBnB,MAAxB,EAAgCe,GAAhC,CAFF;AAGTO,QAAAA,QAAQ,EAAEtB,MAAM,CAACuB,UAAP,CAAkBJ,IAAlB,CAAuBnB,MAAvB,EAA+Be,GAA/B,CAHD;AAITS,QAAAA,WAAW,EAAExB,MAAM,CAACuB,UAAP,CAAkBJ,IAAlB,CAAuBnB,MAAvB,EAA+Be,GAA/B;AAJJ,OAAb;AAMAlE,MAAAA,MAAM,CAAC4E,IAAP,CAAYzB,MAAM,CAACgB,GAAnB,EAAwBU,OAAxB,CAAgC,UAAU7D,GAAV,EAAe;AAC3CkD,QAAAA,GAAG,CAACpB,gBAAJ,CAAqB9B,GAArB,EAA0BmC,MAAM,CAACgB,GAAP,CAAWnD,GAAX,CAA1B,EAA2C+B,kBAA3C;AACH,OAFD;AAGH,KAdD;;AAeAI,IAAAA,MAAM,CAAC2B,OAAP,GAAiB,UAAUZ,GAAV,EAAe;AAC5B,UAAI,CAACf,MAAM,CAACgB,GAAR,IAAe,CAACD,GAApB,EAAyB;AACrB;AACA;AACH;;AACDlE,MAAAA,MAAM,CAAC4E,IAAP,CAAYzB,MAAM,CAACgB,GAAnB,EAAwBU,OAAxB,CAAgC,UAAU7D,GAAV,EAAe;AAC3CkD,QAAAA,GAAG,CAACa,mBAAJ,CAAwB/D,GAAxB,EAA6BmC,MAAM,CAACgB,GAAP,CAAWnD,GAAX,CAA7B;AACH,OAFD;AAGH,KARD;;AASAmC,IAAAA,MAAM,CAACkB,YAAP,GAAsB,UAAUW,IAAV,EAAgBnF,CAAhB,EAAmB;AACrCsD,MAAAA,MAAM,CAAC8B,QAAP,GAAkB9B,MAAM,CAAC+B,aAAP,GAAuBrF,CAAC,CAACsF,OAAF,CAAU,CAAV,EAAaC,OAAtD,CADqC,CAErC;;AACAjC,MAAAA,MAAM,CAACS,YAAP,GAAsBT,MAAM,CAACS,YAAP,IAAuB,CAA7C;AACH,KAJD;;AAKAT,IAAAA,MAAM,CAACkC,MAAP,GAAgB,UAAUnB,GAAV,EAAeP,SAAf,EAA0B;AACtC,UAAI2B,SAAS,GAAGnC,MAAM,CAAC5B,KAAP,CAAagE,kBAAb,EAAhB;;AACA,UAAID,SAAS,IAAIA,SAAS,KAAKE,QAAQ,CAACC,IAAxC,EAA8C;AAC1C;AACA,YAAIC,UAAU,GAAGF,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACG,gBAArC,GAAwDH,QAAQ,CAACC,IAAlF;;AACA,YAAI9B,SAAS,KAAKxB,EAAlB,EAAsB;AAClB,iBAAOuD,UAAU,CAACE,YAAX,GAA0BF,UAAU,CAACG,SAArC,IAAkDhD,MAAM,CAACiD,WAAhE;AACH;;AACD,YAAInC,SAAS,KAAKzB,IAAlB,EAAwB;AACpB,iBAAOwD,UAAU,CAACG,SAAX,IAAwB,CAA/B;AACH;AACJ;;AACD,UAAIlC,SAAS,KAAKxB,EAAlB,EAAsB;AAClB,eAAO+B,GAAG,CAAC0B,YAAJ,GAAmB1B,GAAG,CAAC2B,SAAvB,KAAqC3B,GAAG,CAAC6B,YAAhD;AACH;;AACD,UAAIpC,SAAS,KAAKzB,IAAlB,EAAwB;AACpB,eAAOgC,GAAG,CAAC2B,SAAJ,IAAiB,CAAxB;AACH;AACJ,KAlBD;;AAmBA1C,IAAAA,MAAM,CAAC6C,OAAP,GAAiB,UAAUC,EAAV,EAAc;AAC3B,UAAIC,IAAI,CAACC,GAAL,CAAShD,MAAM,CAACS,YAAhB,IAAgCT,MAAM,CAAC5B,KAAP,CAAayE,OAAjD,EAA0D;AACtD,eAAO,CAAP;AACH;;AACD,UAAII,KAAK,GAAGF,IAAI,CAACC,GAAL,CAAShD,MAAM,CAAC8B,QAAP,GAAkB9B,MAAM,CAAC+B,aAAlC,IAAmDrC,MAAM,CAACwD,MAAP,CAAcC,MAA7E;AACAL,MAAAA,EAAE,IAAI,CAAC,IAAIG,KAAL,IAAc,GAApB;AACA,aAAOH,EAAP;AACH,KAPD;;AAQA9C,IAAAA,MAAM,CAACqB,WAAP,GAAqB,UAAUN,GAAV,EAAerE,CAAf,EAAkB;AACnC;AACA,UAAI0G,QAAQ,GAAG1G,CAAC,CAACsF,OAAF,CAAU,CAAV,EAAaC,OAA5B;AACA,UAAIzB,SAAS,GAAGR,MAAM,CAAC5B,KAAP,CAAaoC,SAA7B,CAHmC,CAInC;;AAEA,UAAIA,SAAS,KAAKxB,EAAd,IAAoBgB,MAAM,CAAC+B,aAAP,GAAuBqB,QAA3C,IAAuD5C,SAAS,KAAKzB,IAAd,IAAsBiB,MAAM,CAAC+B,aAAP,GAAuBqB,QAAxG,EAAkH;AAC9G;AACH;;AACD,UAAIpD,MAAM,CAACkC,MAAP,CAAcnB,GAAd,EAAmBP,SAAnB,CAAJ,EAAmC;AAC/B,YAAI,CAACR,MAAM,CAACC,KAAP,CAAaE,UAAlB,EAA8B;AAC1B;AACA;AACAH,UAAAA,MAAM,CAAC8B,QAAP,GAAkB9B,MAAM,CAAC+B,aAAP,GAAuBrF,CAAC,CAACsF,OAAF,CAAU,CAAV,EAAaC,OAAtD;;AACAjC,UAAAA,MAAM,CAACW,QAAP,CAAgB;AAAER,YAAAA,UAAU,EAAE;AAAd,WAAhB;AACH;;AACDzD,QAAAA,CAAC,CAAC2G,cAAF,GAP+B,CAQ/B;AACA;AACA;;AACA,YAAIC,KAAK,GAAGP,IAAI,CAACQ,KAAL,CAAWH,QAAQ,GAAGpD,MAAM,CAAC8B,QAA7B,CAAZ;;AACA9B,QAAAA,MAAM,CAAC8B,QAAP,GAAkBsB,QAAlB;AACApD,QAAAA,MAAM,CAACS,YAAP,IAAuBT,MAAM,CAAC6C,OAAP,CAAeS,KAAf,CAAvB;;AACAtD,QAAAA,MAAM,CAACY,eAAP,CAAuBZ,MAAM,CAACS,YAA9B;;AACA,YAAIsC,IAAI,CAACC,GAAL,CAAShD,MAAM,CAACS,YAAhB,IAAgCT,MAAM,CAAC5B,KAAP,CAAasC,iBAAjD,EAAoE;AAChE,cAAIV,MAAM,CAACC,KAAP,CAAaC,MAAb,KAAwB,YAA5B,EAA0C;AACtC;AACAF,YAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,cAAAA,MAAM,EAAE;AAAV,aAAhB;AACH;AACJ,SALD,MAKO;AACH,cAAIF,MAAM,CAACC,KAAP,CAAaC,MAAb,KAAwB,YAA5B,EAA0C;AACtC;AACAF,YAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,cAAAA,MAAM,EAAE;AAAV,aAAhB;AACH;AACJ,SAzB8B,CA0B/B;AACA;;;AACA,YAAIvB,SAAS,IAAIjC,CAAC,CAAC8G,cAAF,CAAiB,CAAjB,EAAoBC,OAApB,GAA8B,CAA/C,EAAkD;AAC9CzD,UAAAA,MAAM,CAACuB,UAAP;AACH;AACJ;AACJ,KAzCD;;AA0CAvB,IAAAA,MAAM,CAACuB,UAAP,GAAoB,YAAY;AAC5B,UAAIvB,MAAM,CAACC,KAAP,CAAaE,UAAjB,EAA6B;AACzBH,QAAAA,MAAM,CAACW,QAAP,CAAgB;AAAER,UAAAA,UAAU,EAAE;AAAd,SAAhB;AACH;;AACD,UAAIH,MAAM,CAACC,KAAP,CAAaC,MAAb,KAAwB,UAA5B,EAAwC;AACpCF,QAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,UAAAA,MAAM,EAAE;AAAV,SAAhB;;AACAF,QAAAA,MAAM,CAAC0D,MAAP,GAAgBC,UAAU,CAAC,YAAY;AACnC,cAAI,CAAC3D,MAAM,CAAC5B,KAAP,CAAamC,UAAlB,EAA8B;AAC1BP,YAAAA,MAAM,CAACW,QAAP,CAAgB;AAAET,cAAAA,MAAM,EAAE;AAAV,aAAhB,EAAsC,YAAY;AAC9C,qBAAOF,MAAM,CAACa,KAAP,EAAP;AACH,aAFD;AAGH;;AACDb,UAAAA,MAAM,CAAC0D,MAAP,GAAgBE,SAAhB;AACH,SAPyB,EAOvB,IAPuB,CAA1B;;AAQA5D,QAAAA,MAAM,CAAC5B,KAAP,CAAayF,SAAb;AACH,OAXD,MAWO;AACH7D,QAAAA,MAAM,CAACa,KAAP;AACH;AACJ,KAlBD;;AAmBAb,IAAAA,MAAM,CAACa,KAAP,GAAe,YAAY;AACvBb,MAAAA,MAAM,CAACS,YAAP,GAAsB,CAAtB;;AACAT,MAAAA,MAAM,CAACY,eAAP,CAAuB,CAAvB;AACH,KAHD;;AAIAZ,IAAAA,MAAM,CAACY,eAAP,GAAyB,UAAUkD,EAAV,EAAc;AACnC;AACA,UAAI9D,MAAM,CAAC+D,UAAX,EAAuB;AACnBzF,QAAAA,YAAY,CAAC0B,MAAM,CAAC+D,UAAP,CAAkBC,KAAnB,EAA0B,qBAAqBF,EAArB,GAA0B,OAApD,CAAZ;AACH;AACJ,KALD;;AAMA,WAAO9D,MAAP;AACH;;AAED3D,EAAAA,YAAY,CAACyD,aAAD,EAAgB,CAAC;AACzBjC,IAAAA,GAAG,EAAE,uBADoB;AAEzBC,IAAAA,KAAK,EAAE,SAASC,qBAAT,CAA+BC,SAA/B,EAA0C;AAC7C,WAAKqC,oBAAL,GAA4B,KAAKjC,KAAL,CAAW6F,QAAX,KAAwBjG,SAAS,CAACiG,QAA9D;AACA,aAAO,IAAP;AACH;AALwB,GAAD,EAMzB;AACCpG,IAAAA,GAAG,EAAE,oBADN;AAECC,IAAAA,KAAK,EAAE,SAASoG,kBAAT,CAA4BC,SAA5B,EAAuC;AAC1C,UAAIA,SAAS,KAAK,KAAK/F,KAAnB,IAA4B+F,SAAS,CAAC5D,UAAV,KAAyB,KAAKnC,KAAL,CAAWmC,UAApE,EAAgF;AAC5E;AACH,OAHyC,CAI1C;;;AACA,WAAKD,oBAAL;AACH;AARF,GANyB,EAezB;AACCzC,IAAAA,GAAG,EAAE,mBADN;AAECC,IAAAA,KAAK,EAAE,SAASsG,iBAAT,GAA6B;AAChC,UAAIC,MAAM,GAAG,IAAb,CADgC,CAGhC;;;AACAV,MAAAA,UAAU,CAAC,YAAY;AACnBU,QAAAA,MAAM,CAACvD,IAAP,CAAYuD,MAAM,CAACjG,KAAP,CAAagE,kBAAb,MAAqCiC,MAAM,CAACC,YAAxD;;AACAD,QAAAA,MAAM,CAAC/D,oBAAP;;AACA+D,QAAAA,MAAM,CAACjE,UAAP,GAAoB,IAApB;AACH,OAJS,CAAV;AAKH;AAXF,GAfyB,EA2BzB;AACCvC,IAAAA,GAAG,EAAE,sBADN;AAECC,IAAAA,KAAK,EAAE,SAASyG,oBAAT,GAAgC;AACnC;AACA,WAAK5C,OAAL,CAAa,KAAKvD,KAAL,CAAWgE,kBAAX,MAAmC,KAAKkC,YAArD;AACH;AALF,GA3ByB,EAiCzB;AACCzG,IAAAA,GAAG,EAAE,QADN;AAECC,IAAAA,KAAK,EAAE,SAASI,MAAT,GAAkB;AACrB,UAAIsG,MAAM,GAAG,IAAb;;AAEA,UAAIpG,KAAK,GAAGjC,QAAQ,CAAC,EAAD,EAAK,KAAKiC,KAAV,CAApB;;AACA,aAAOA,KAAK,CAACyE,OAAb;;AAEA,UAAI4B,SAAS,GAAGrG,KAAK,CAACqG,SAAtB;AAAA,UACIC,SAAS,GAAGtG,KAAK,CAACsG,SADtB;AAAA,UAEIT,QAAQ,GAAG7F,KAAK,CAAC6F,QAFrB;AAAA,UAGI7B,kBAAkB,GAAGhE,KAAK,CAACgE,kBAH/B;AAAA,UAII5B,SAAS,GAAGpC,KAAK,CAACoC,SAJtB;AAAA,UAKIqD,SAAS,GAAGzF,KAAK,CAACyF,SALtB;AAAA,UAMItD,UAAU,GAAGnC,KAAK,CAACmC,UANvB;AAAA,UAOIoE,SAAS,GAAGvG,KAAK,CAACuG,SAPtB;AAAA,UAQIjE,iBAAiB,GAAGtC,KAAK,CAACsC,iBAR9B;AAAA,UASIkE,SAAS,GAAGpI,MAAM,CAAC4B,KAAD,EAAQ,CAAC,WAAD,EAAc,WAAd,EAA2B,UAA3B,EAAuC,oBAAvC,EAA6D,WAA7D,EAA0E,WAA1E,EAAuF,YAAvF,EAAqG,WAArG,EAAkH,mBAAlH,CAAR,CATtB;;AAWA,UAAIyG,cAAc,GAAGxH,KAAK,CAACc,aAAN,CAAoBZ,cAApB,EAAoC;AAAEU,QAAAA,YAAY,EAAE,KAAKoC,oBAArB;AAA2CnC,QAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtH,iBAAO+F,QAAP;AACH;AAFoD,OAApC,CAArB;;AAGA,UAAIa,aAAa,GAAG,SAASA,aAAT,CAAuBC,GAAvB,EAA4B;AAC5C,YAAIC,GAAG,GAAG1H,UAAU,CAACyH,GAAD,EAAM,CAACP,MAAM,CAACvE,KAAP,CAAaE,UAAd,IAA4BuE,SAAS,GAAG,aAA9C,CAApB;AACA,eAAOrH,KAAK,CAACc,aAAN,CACH,KADG,EAEH;AAAEsG,UAAAA,SAAS,EAAEC,SAAS,GAAG;AAAzB,SAFG,EAGHrH,KAAK,CAACc,aAAN,CACI,KADJ,EAEI;AAAEsG,UAAAA,SAAS,EAAEO,GAAb;AAAkBC,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,EAAb,EAAiB;AAChC,mBAAOV,MAAM,CAACT,UAAP,GAAoBmB,EAA3B;AACH;AAFL,SAFJ,EAKI1E,SAAS,KAAKxB,EAAd,GAAmB6F,cAAnB,GAAoC,IALxC,EAMIxH,KAAK,CAACc,aAAN,CACI,KADJ,EAEI;AAAEsG,UAAAA,SAAS,EAAEC,SAAS,GAAG;AAAzB,SAFJ,EAGIC,SAAS,CAACH,MAAM,CAACvE,KAAP,CAAaC,MAAd,CAAT,IAAkCjB,SAAS,CAACuF,MAAM,CAACvE,KAAP,CAAaC,MAAd,CAH/C,CANJ,EAWIM,SAAS,KAAKzB,IAAd,GAAqB8F,cAArB,GAAsC,IAX1C,CAHG,CAAP;AAiBH,OAnBD;;AAoBA,UAAIzC,kBAAkB,EAAtB,EAA0B;AACtB,eAAO0C,aAAa,CAACJ,SAAS,GAAG,WAAZ,GAA0BA,SAA1B,GAAsC,GAAtC,GAA4ClE,SAA7C,CAApB;AACH;;AACD,aAAOnD,KAAK,CAACc,aAAN,CACH,KADG,EAEHhC,QAAQ,CAAC;AAAE8I,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,EAAb,EAAiB;AACzB,iBAAOV,MAAM,CAACF,YAAP,GAAsBY,EAA7B;AACH,SAFI;AAEFT,QAAAA,SAAS,EAAEnH,UAAU,CAACmH,SAAD,EAAYC,SAAZ,EAAuBA,SAAS,GAAG,GAAZ,GAAkBlE,SAAzC;AAFnB,OAAD,EAE2EoE,SAF3E,CAFL,EAKHE,aAAa,CAACJ,SAAS,GAAG,UAAb,CALV,CAAP;AAOH;AApDF,GAjCyB,CAAhB,CAAZ;;AAwFA,SAAO5E,aAAP;AACH,CAlQmB,CAkQlBzC,KAAK,CAACgB,SAlQY,CAApB;;AAoQA,eAAeyB,aAAf;AAEAA,aAAa,CAACqF,YAAd,GAA6B;AACzBT,EAAAA,SAAS,EAAE,qBADc;AAEzBtC,EAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAC9C,WAAOwB,SAAP;AACH,GAJwB;AAKzBpD,EAAAA,SAAS,EAAEzB,IALc;AAMzB2B,EAAAA,iBAAiB,EAAE,EANM;AAOzBmC,EAAAA,OAAO,EAAE,GAPgB;AAQzB8B,EAAAA,SAAS,EAAE1F;AARc,CAA7B","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\nimport React from 'react';\nimport classNames from 'classnames';\n\nvar StaticRenderer = function (_React$Component) {\n    _inherits(StaticRenderer, _React$Component);\n\n    function StaticRenderer() {\n        _classCallCheck(this, StaticRenderer);\n\n        return _possibleConstructorReturn(this, (StaticRenderer.__proto__ || Object.getPrototypeOf(StaticRenderer)).apply(this, arguments));\n    }\n\n    _createClass(StaticRenderer, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            return nextProps.shouldUpdate;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return React.createElement(\n                'div',\n                null,\n                this.props.render()\n            );\n        }\n    }]);\n\n    return StaticRenderer;\n}(React.Component);\n\nfunction setTransform(nodeStyle, value) {\n    nodeStyle.transform = value;\n    nodeStyle.webkitTransform = value;\n    nodeStyle.MozTransform = value;\n}\nvar isWebView = typeof navigator !== 'undefined' && /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);\nvar DOWN = 'down';\nvar UP = 'up';\nvar INDICATOR = { activate: 'release', deactivate: 'pull', release: 'loading', finish: 'finish' };\nvar supportsPassive = false;\ntry {\n    var opts = Object.defineProperty({}, 'passive', {\n        get: function get() {\n            supportsPassive = true;\n        }\n    });\n    window.addEventListener('test', null, opts);\n} catch (e) {\n    // empty\n}\nvar willPreventDefault = supportsPassive ? { passive: false } : false;\n// const willNotPreventDefault = supportsPassive ? { passive: true } : false;\n\nvar PullToRefresh = function (_React$Component2) {\n    _inherits(PullToRefresh, _React$Component2);\n\n    function PullToRefresh() {\n        _classCallCheck(this, PullToRefresh);\n\n        // https://github.com/yiminghe/zscroller/blob/2d97973287135745818a0537712235a39a6a62a1/src/Scroller.js#L355\n        // currSt: `activate` / `deactivate` / `release` / `finish`\n        var _this2 = _possibleConstructorReturn(this, (PullToRefresh.__proto__ || Object.getPrototypeOf(PullToRefresh)).apply(this, arguments));\n\n        _this2.state = {\n            currSt: 'deactivate',\n            dragOnEdge: false\n        };\n        _this2._isMounted = false;\n        _this2.shouldUpdateChildren = false;\n        _this2.triggerPullToRefresh = function () {\n            // 在初始化时、用代码 自动 触发 pullToRefresh\n            // 注意：当 direction 为 up 时，当 visible length < content length 时、则看不到效果\n            // 添加this._isMounted的判断，否则组建一实例化，currSt就会是finish\n            if (!_this2.state.dragOnEdge && _this2._isMounted) {\n                if (_this2.props.refreshing) {\n                    if (_this2.props.direction === UP) {\n                        _this2._lastScreenY = -_this2.props.distanceToRefresh - 1;\n                    }\n                    if (_this2.props.direction === DOWN) {\n                        _this2._lastScreenY = _this2.props.distanceToRefresh + 1;\n                    }\n                    // change dom need after setState\n                    _this2.setState({ currSt: 'release' }, function () {\n                        return _this2.setContentStyle(_this2._lastScreenY);\n                    });\n                } else {\n                    _this2.setState({ currSt: 'finish' }, function () {\n                        return _this2.reset();\n                    });\n                }\n            }\n        };\n        _this2.init = function (ele) {\n            if (!ele) {\n                // like return in destroy fn ???!!\n                return;\n            }\n            _this2._to = {\n                touchstart: _this2.onTouchStart.bind(_this2, ele),\n                touchmove: _this2.onTouchMove.bind(_this2, ele),\n                touchend: _this2.onTouchEnd.bind(_this2, ele),\n                touchcancel: _this2.onTouchEnd.bind(_this2, ele)\n            };\n            Object.keys(_this2._to).forEach(function (key) {\n                ele.addEventListener(key, _this2._to[key], willPreventDefault);\n            });\n        };\n        _this2.destroy = function (ele) {\n            if (!_this2._to || !ele) {\n                // componentWillUnmount fire before componentDidMount, like forceUpdate ???!!\n                return;\n            }\n            Object.keys(_this2._to).forEach(function (key) {\n                ele.removeEventListener(key, _this2._to[key]);\n            });\n        };\n        _this2.onTouchStart = function (_ele, e) {\n            _this2._ScreenY = _this2._startScreenY = e.touches[0].screenY;\n            // 一开始 refreshing 为 true 时 this._lastScreenY 有值\n            _this2._lastScreenY = _this2._lastScreenY || 0;\n        };\n        _this2.isEdge = function (ele, direction) {\n            var container = _this2.props.getScrollContainer();\n            if (container && container === document.body) {\n                // In chrome61 `document.body.scrollTop` is invalid\n                var scrollNode = document.scrollingElement ? document.scrollingElement : document.body;\n                if (direction === UP) {\n                    return scrollNode.scrollHeight - scrollNode.scrollTop <= window.innerHeight;\n                }\n                if (direction === DOWN) {\n                    return scrollNode.scrollTop <= 0;\n                }\n            }\n            if (direction === UP) {\n                return ele.scrollHeight - ele.scrollTop === ele.clientHeight;\n            }\n            if (direction === DOWN) {\n                return ele.scrollTop <= 0;\n            }\n        };\n        _this2.damping = function (dy) {\n            if (Math.abs(_this2._lastScreenY) > _this2.props.damping) {\n                return 0;\n            }\n            var ratio = Math.abs(_this2._ScreenY - _this2._startScreenY) / window.screen.height;\n            dy *= (1 - ratio) * 0.6;\n            return dy;\n        };\n        _this2.onTouchMove = function (ele, e) {\n            // 使用 pageY 对比有问题\n            var _screenY = e.touches[0].screenY;\n            var direction = _this2.props.direction;\n            // 拖动方向不符合的不处理\n\n            if (direction === UP && _this2._startScreenY < _screenY || direction === DOWN && _this2._startScreenY > _screenY) {\n                return;\n            }\n            if (_this2.isEdge(ele, direction)) {\n                if (!_this2.state.dragOnEdge) {\n                    // 当用户开始往上滑的时候isEdge还是false的话，会导致this._ScreenY不是想要的，只有当isEdge为true时，再上滑，才有意义\n                    // 下面这行代码解决了上面这个问题\n                    _this2._ScreenY = _this2._startScreenY = e.touches[0].screenY;\n                    _this2.setState({ dragOnEdge: true });\n                }\n                e.preventDefault();\n                // add stopPropagation with fastclick will trigger content onClick event. why?\n                // ref https://github.com/ant-design/ant-design-mobile/issues/2141\n                // e.stopPropagation();\n                var _diff = Math.round(_screenY - _this2._ScreenY);\n                _this2._ScreenY = _screenY;\n                _this2._lastScreenY += _this2.damping(_diff);\n                _this2.setContentStyle(_this2._lastScreenY);\n                if (Math.abs(_this2._lastScreenY) < _this2.props.distanceToRefresh) {\n                    if (_this2.state.currSt !== 'deactivate') {\n                        // console.log('back to the distance');\n                        _this2.setState({ currSt: 'deactivate' });\n                    }\n                } else {\n                    if (_this2.state.currSt === 'deactivate') {\n                        // console.log('reach to the distance');\n                        _this2.setState({ currSt: 'activate' });\n                    }\n                }\n                // https://github.com/ant-design/ant-design-mobile/issues/573#issuecomment-339560829\n                // iOS UIWebView issue, It seems no problem in WKWebView\n                if (isWebView && e.changedTouches[0].clientY < 0) {\n                    _this2.onTouchEnd();\n                }\n            }\n        };\n        _this2.onTouchEnd = function () {\n            if (_this2.state.dragOnEdge) {\n                _this2.setState({ dragOnEdge: false });\n            }\n            if (_this2.state.currSt === 'activate') {\n                _this2.setState({ currSt: 'release' });\n                _this2._timer = setTimeout(function () {\n                    if (!_this2.props.refreshing) {\n                        _this2.setState({ currSt: 'finish' }, function () {\n                            return _this2.reset();\n                        });\n                    }\n                    _this2._timer = undefined;\n                }, 1000);\n                _this2.props.onRefresh();\n            } else {\n                _this2.reset();\n            }\n        };\n        _this2.reset = function () {\n            _this2._lastScreenY = 0;\n            _this2.setContentStyle(0);\n        };\n        _this2.setContentStyle = function (ty) {\n            // todos: Why sometimes do not have `this.contentRef` ?\n            if (_this2.contentRef) {\n                setTransform(_this2.contentRef.style, 'translate3d(0px,' + ty + 'px,0)');\n            }\n        };\n        return _this2;\n    }\n\n    _createClass(PullToRefresh, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            this.shouldUpdateChildren = this.props.children !== nextProps.children;\n            return true;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (prevProps === this.props || prevProps.refreshing === this.props.refreshing) {\n                return;\n            }\n            // triggerPullToRefresh 需要尽可能减少 setState 次数\n            this.triggerPullToRefresh();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this3 = this;\n\n            // `getScrollContainer` most likely return React.Node at the next tick. Need setTimeout\n            setTimeout(function () {\n                _this3.init(_this3.props.getScrollContainer() || _this3.containerRef);\n                _this3.triggerPullToRefresh();\n                _this3._isMounted = true;\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            // Should have no setTimeout here!\n            this.destroy(this.props.getScrollContainer() || this.containerRef);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var props = _extends({}, this.props);\n            delete props.damping;\n\n            var className = props.className,\n                prefixCls = props.prefixCls,\n                children = props.children,\n                getScrollContainer = props.getScrollContainer,\n                direction = props.direction,\n                onRefresh = props.onRefresh,\n                refreshing = props.refreshing,\n                indicator = props.indicator,\n                distanceToRefresh = props.distanceToRefresh,\n                restProps = __rest(props, [\"className\", \"prefixCls\", \"children\", \"getScrollContainer\", \"direction\", \"onRefresh\", \"refreshing\", \"indicator\", \"distanceToRefresh\"]);\n\n            var renderChildren = React.createElement(StaticRenderer, { shouldUpdate: this.shouldUpdateChildren, render: function render() {\n                    return children;\n                } });\n            var renderRefresh = function renderRefresh(cls) {\n                var cla = classNames(cls, !_this4.state.dragOnEdge && prefixCls + '-transition');\n                return React.createElement(\n                    'div',\n                    { className: prefixCls + '-content-wrapper' },\n                    React.createElement(\n                        'div',\n                        { className: cla, ref: function ref(el) {\n                                return _this4.contentRef = el;\n                            } },\n                        direction === UP ? renderChildren : null,\n                        React.createElement(\n                            'div',\n                            { className: prefixCls + '-indicator' },\n                            indicator[_this4.state.currSt] || INDICATOR[_this4.state.currSt]\n                        ),\n                        direction === DOWN ? renderChildren : null\n                    )\n                );\n            };\n            if (getScrollContainer()) {\n                return renderRefresh(prefixCls + '-content ' + prefixCls + '-' + direction);\n            }\n            return React.createElement(\n                'div',\n                _extends({ ref: function ref(el) {\n                        return _this4.containerRef = el;\n                    }, className: classNames(className, prefixCls, prefixCls + '-' + direction) }, restProps),\n                renderRefresh(prefixCls + '-content')\n            );\n        }\n    }]);\n\n    return PullToRefresh;\n}(React.Component);\n\nexport default PullToRefresh;\n\nPullToRefresh.defaultProps = {\n    prefixCls: 'rmc-pull-to-refresh',\n    getScrollContainer: function getScrollContainer() {\n        return undefined;\n    },\n    direction: DOWN,\n    distanceToRefresh: 25,\n    damping: 100,\n    indicator: INDICATOR\n};"]},"metadata":{},"sourceType":"module"}